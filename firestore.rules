
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // กฎสำหรับคอลเลกชัน "posts" (บทความ)
    match /posts/{postId} {
      // อนุญาตให้ทุกคนอ่านและแสดงรายการบทความได้ (สำคัญสำหรับหน้าแรกและหน้าบล็อก)
      allow read, list: if true;
      
      // เฉพาะผู้ใช้ที่ล็อกอินแล้ว (แอดมิน) เท่านั้นที่สามารถเขียน, อัปเดต, หรือลบข้อมูลได้
      allow write, update, delete: if request.auth != null;
    }

    // กฎสำหรับคอลเลกชัน "quotes" (ใบเสนอราคา)
    match /quotes/{quoteId} {
      // อนุญาตให้ทุกคนสามารถสร้าง (ส่ง) ใบเสนอราคาได้
      allow create: if true;
      
      // เฉพาะผู้ใช้ที่ล็อกอินแล้ว (แอดมิน) เท่านั้นที่สามารถอ่าน, อัปเดต, หรือลบได้
      allow read, update, delete, list: if request.auth != null;
    }

    // กฎสำหรับคอลเลกชัน "pages" (ข้อมูลหน้าเว็บ เช่น รูปภาพปก)
    match /pages/{pageId} {
      // อนุญาตให้ทุกคนสามารถอ่านข้อมูลสำหรับแสดงผลหน้าเว็บได้
      allow read, list: if true;
      
      // เฉพาะผู้ใช้ที่ล็อกอินแล้ว (แอดมิน) เท่านั้นที่สามารถเขียนข้อมูลได้
      allow write: if request.auth != null;
    }
  }
}
